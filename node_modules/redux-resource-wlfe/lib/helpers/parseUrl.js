'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = parseUrl;

var _splitParams = require('./splitParams');

var _splitParams2 = _interopRequireDefault(_splitParams);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function parseUrl(url) {
  var regex = /:\w+/g;
  var statics = url.split(regex);
  var paramKeys = (url.match(regex) || []).map(function (paramId) {
    return paramId.replace(':', '');
  });

  return function (params) {
    var split = (0, _splitParams2.default)(params || {}, paramKeys);
    var pathParams = split[0];
    var queryParams = split[1];

    var finalUrl = statics.reduce(function (memo, piece, i) {
      var paramKey = paramKeys[i] || '';
      var paramId = paramKey ? ':' + paramKey : '';

      return memo + piece + (pathParams[paramKey] || paramId);
    }, '');

    if (queryParams) {
      return finalUrl + '?' + queryParams;
    }

    return finalUrl;
  };
}